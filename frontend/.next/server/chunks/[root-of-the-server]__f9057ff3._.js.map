{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///home/ratish/Documents/live-detect/frontend/src/app/api/streams/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\n\ntype StreamRecord = {\n\t id: string;\n\t name: string;\n\t url: string;\n\t status: \"pending\" | \"connected\" | \"error\";\n};\n\n// In-memory placeholder store (for local dev only)\nconst streams: StreamRecord[] = [];\n\nexport async function GET() {\n\treturn NextResponse.json({ streams });\n}\n\nexport async function POST(request: Request) {\n\ttry {\n\t\tconst body = await request.json();\n\t\tconst name: string = (body?.name ?? \"\").toString().trim();\n\t\tconst url: string = (body?.url ?? \"\").toString().trim();\n\n\t\tif (!name || !url) {\n\t\t\treturn NextResponse.json(\n\t\t\t\t{ error: \"Both 'name' and 'url' (RTSP) are required.\" },\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\n\t\t// Very light RTSP-ish validation (placeholder)\n\t\tif (!/^rtsp(s)?:\\/\\//i.test(url)) {\n\t\t\treturn NextResponse.json(\n\t\t\t\t{ error: \"URL must be an RTSP link (e.g., rtsp://...).\" },\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\n\t\tconst record: StreamRecord = {\n\t\t\tid: crypto.randomUUID(),\n\t\t\tname,\n\t\t\turl,\n\t\t\tstatus: \"pending\",\n\t\t};\n\t\tstreams.push(record);\n\n\t\t// NOTE: In production, call your backend here to register the stream\n\t\t// and return whatever metadata you need to render the player.\n\n\t\treturn NextResponse.json({ stream: record }, { status: 201 });\n\t} catch (err) {\n\t\treturn NextResponse.json(\n\t\t\t{ error: \"Invalid request body.\" },\n\t\t\t{ status: 400 }\n\t\t);\n\t}\n}\n\nexport async function DELETE(request: Request) {\n\tconst { searchParams } = new URL(request.url);\n\tconst id = searchParams.get(\"id\");\n\tif (!id) return NextResponse.json({ error: \"id is required\" }, { status: 400 });\n\tconst idx = streams.findIndex((s) => s.id === id);\n\tif (idx === -1) return NextResponse.json({ error: \"not found\" }, { status: 404 });\n\tconst [removed] = streams.splice(idx, 1);\n\treturn NextResponse.json({ removed });\n}\n\n\nexport async function PATCH(request: Request) {\n\ttry {\n\t\tconst body = await request.json();\n\t\tconst id: string = (body?.id ?? \"\").toString();\n\t\tconst name: string = (body?.name ?? \"\").toString().trim();\n\t\tif (!id || !name) {\n\t\t\treturn NextResponse.json(\n\t\t\t\t{ error: \"Both 'id' and 'name' are required.\" },\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\t\tconst record = streams.find((s) => s.id === id);\n\t\tif (!record) {\n\t\t\treturn NextResponse.json({ error: \"not found\" }, { status: 404 });\n\t\t}\n\t\trecord.name = name;\n\t\treturn NextResponse.json({ stream: record });\n\t} catch (err) {\n\t\treturn NextResponse.json({ error: \"Invalid request body.\" }, { status: 400 });\n\t}\n}\n\n\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AASA,mDAAmD;AACnD,MAAM,UAA0B,EAAE;AAE3B,eAAe;IACrB,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE;IAAQ;AACpC;AAEO,eAAe,KAAK,OAAgB;IAC1C,IAAI;QACH,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,OAAe,CAAC,MAAM,QAAQ,EAAE,EAAE,QAAQ,GAAG,IAAI;QACvD,MAAM,MAAc,CAAC,MAAM,OAAO,EAAE,EAAE,QAAQ,GAAG,IAAI;QAErD,IAAI,CAAC,QAAQ,CAAC,KAAK;YAClB,OAAO,gJAAY,CAAC,IAAI,CACvB;gBAAE,OAAO;YAA6C,GACtD;gBAAE,QAAQ;YAAI;QAEhB;QAEA,+CAA+C;QAC/C,IAAI,CAAC,kBAAkB,IAAI,CAAC,MAAM;YACjC,OAAO,gJAAY,CAAC,IAAI,CACvB;gBAAE,OAAO;YAA+C,GACxD;gBAAE,QAAQ;YAAI;QAEhB;QAEA,MAAM,SAAuB;YAC5B,IAAI,OAAO,UAAU;YACrB;YACA;YACA,QAAQ;QACT;QACA,QAAQ,IAAI,CAAC;QAEb,qEAAqE;QACrE,8DAA8D;QAE9D,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;QAAO,GAAG;YAAE,QAAQ;QAAI;IAC5D,EAAE,OAAO,KAAK;QACb,OAAO,gJAAY,CAAC,IAAI,CACvB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEhB;AACD;AAEO,eAAe,OAAO,OAAgB;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,KAAK,aAAa,GAAG,CAAC;IAC5B,IAAI,CAAC,IAAI,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAiB,GAAG;QAAE,QAAQ;IAAI;IAC7E,MAAM,MAAM,QAAQ,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC9C,IAAI,QAAQ,CAAC,GAAG,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAY,GAAG;QAAE,QAAQ;IAAI;IAC/E,MAAM,CAAC,QAAQ,GAAG,QAAQ,MAAM,CAAC,KAAK;IACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE;IAAQ;AACpC;AAGO,eAAe,MAAM,OAAgB;IAC3C,IAAI;QACH,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,KAAa,CAAC,MAAM,MAAM,EAAE,EAAE,QAAQ;QAC5C,MAAM,OAAe,CAAC,MAAM,QAAQ,EAAE,EAAE,QAAQ,GAAG,IAAI;QACvD,IAAI,CAAC,MAAM,CAAC,MAAM;YACjB,OAAO,gJAAY,CAAC,IAAI,CACvB;gBAAE,OAAO;YAAqC,GAC9C;gBAAE,QAAQ;YAAI;QAEhB;QACA,MAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAC5C,IAAI,CAAC,QAAQ;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAY,GAAG;gBAAE,QAAQ;YAAI;QAChE;QACA,OAAO,IAAI,GAAG;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;QAAO;IAC3C,EAAE,OAAO,KAAK;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACD","debugId":null}}]
}