{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/ratish/Documents/live-detect/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport Link from \"next/link\";\n\nexport default function Home() {\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [streams, setStreams] = useState<Array<{ id: number; name: string; url: string; backendId?: string; processorId?: string }>>([]);\n  const [fullscreenLocalId, setFullscreenLocalId] = useState<number | null>(null);\n  const [showAdd, setShowAdd] = useState(false);\n  const [newName, setNewName] = useState(\"\");\n  const [newUrl, setNewUrl] = useState(\"\");\n  const [showRename, setShowRename] = useState(false);\n  const [renameLocalId, setRenameLocalId] = useState<number | null>(null);\n  const [renameValue, setRenameValue] = useState(\"\");\n  const nextId = useMemo(() => (streams.length ? Math.max(...streams.map(s => s.id)) + 1 : 1), [streams]);\n  const [logs] = useState<string[]>([\n    \"System ready\",\n    \"Awaiting streams\",\n    \"No alerts\",\n  ]);\n\n  // Stop all active backend streams when leaving the page (browser close/refresh)\n  useEffect(() => {\n    const handleBeforeUnload = () => {\n      const ids = streams.map((s) => s.processorId).filter(Boolean) as string[];\n      ids.forEach((pid) => {\n        try {\n          // keepalive allows the request to be sent during unload\n          fetch(\"/api/stop_stream\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ stream_id: pid }),\n            keepalive: true as any,\n          }).catch(() => {});\n        } catch {}\n      });\n    };\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\n    return () => {\n      window.removeEventListener(\"beforeunload\", handleBeforeUnload);\n    };\n  }, [streams]);\n\n  const StreamLabel = ({ label }: { label: string }) => (\n    <span className=\"text-white/70\">{label}</span>\n  );\n\n  function RightPanel({ hasStreams }: { hasStreams: boolean }) {\n    const [stats, setStats] = useState<{ total_faces?: number; suspicious_faces?: number; clean_faces?: number; database_entries?: number; suspicious_ids?: any } | null>(null);\n    const [suspiciousIds, setSuspiciousIds] = useState<any[]>([]);\n    const [suspects, setSuspects] = useState<any[]>([]);\n    useEffect(() => {\n      let timer: any;\n      let isActive = true;\n      const controller = new AbortController();\n      const poll = async () => {\n        try {\n          const res = await fetch(\"/api/shared_stats\", { cache: \"no-store\", signal: controller.signal });\n          if (!isActive) return;\n          const data = await res.json().catch(() => ({}));\n          if (!isActive) return;\n          setStats(data || {});\n        } catch {}\n        if (hasStreams && isActive) {\n          timer = setTimeout(poll, 2000);\n        }\n      };\n      if (hasStreams) {\n        poll();\n      } else {\n        setStats(null);\n        setSuspiciousIds([]);\n        setSuspects([]);\n      }\n      return () => {\n        isActive = false;\n        controller.abort();\n        if (timer) clearTimeout(timer);\n      };\n    }, [hasStreams]);\n\n    // Track latest suspicious_ids from stats\n    useEffect(() => {\n      if (!hasStreams) return;\n      const ids = (stats?.suspicious_ids as any) || [];\n      // Normalize to array\n      const nextIds = Array.isArray(ids) ? ids : Array.from(ids || []);\n      setSuspiciousIds(nextIds);\n    }, [hasStreams, stats?.suspicious_ids]);\n\n    // Fetch suspects list when suspiciousIds change\n    useEffect(() => {\n      let active = true;\n      const fetchSuspects = async () => {\n        if (!hasStreams) return;\n        try {\n          const res = await fetch(\"/api/get-suspicious-data\", { cache: \"no-store\" });\n          const data = await res.json().catch(() => ({}));\n          if (!active) return;\n          if (data?.status === \"success\" && Array.isArray(data?.data)) {\n            setSuspects(data.data);\n          }\n        } catch {}\n      };\n      // Only fetch when there are IDs to represent new/updated suspicious detections\n      if (hasStreams && suspiciousIds && suspiciousIds.length > 0) {\n        fetchSuspects();\n      } else {\n        setSuspects([]);\n      }\n      return () => {\n        active = false;\n      };\n    }, [hasStreams, JSON.stringify(suspiciousIds)]);\n\n    return (\n      <aside className=\"bg-subpanel rounded-2xl p-6 h-full flex flex-col gap-6\">\n        <div>\n          <h3 className=\"text-xl font-semibold mb-4\">Stats</h3>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <Stat label=\"Total Faces\" value={stats?.total_faces ?? 0} />\n            <Stat label=\"Suspicious\" value={stats?.suspicious_faces ?? 0} />\n            <Stat label=\"Clean\" value={stats?.clean_faces ?? 0} />\n            <Stat label=\"DB Entries\" value={stats?.database_entries ?? 0} />\n          </div>\n        </div>\n\n        <div className=\"flex-1 min-h-0\">\n          <h3 className=\"text-xl font-semibold mb-3\">Suspects Found</h3>\n          <div className=\"space-y-3 overflow-auto pr-1\">\n            {suspects.length === 0 ? (\n              <div className=\"text-white/60 text-sm\">No suspects yet.</div>\n            ) : (\n              suspects.map((it, idx) => (\n                <SuspectCard\n                  key={idx}\n                  name={it?.name ?? \"Unknown\"}\n                  stream={it?.stream_name ?? \"Stream\"}\n                  time={it?.timestamp ?? \"\"}\n                  img={it?.img_url || \"/vercel.svg\"}\n                />\n              ))\n            )}\n          </div>\n        </div>\n\n        <Link href=\"/logs\" className=\"mt-2 h-12 rounded-full btn-white px-6 text-lg font-medium self-start grid place-items-center\">\n          View All\n        </Link>\n      </aside>\n    );\n  }\n\n  function Stat({ label, value }: { label: string; value: number }) {\n    return (\n      <div className=\"rounded-xl bg-chip text-white/90 px-4 py-3\">\n        <div className=\"text-sm text-white/70\">{label}</div>\n        <div className=\"text-2xl font-semibold\">{value}</div>\n      </div>\n    );\n  }\n\n  function SuspectCard({ name, stream, time, img }: { name: string; stream: string; time: string; img: string }) {\n    return (\n      <div className=\"flex items-center gap-3 rounded-xl bg-chip px-3 py-2 text-white/90\">\n        <img src={img} alt={name} className=\"h-10 w-10 rounded object-cover bg-white\" />\n        <div className=\"min-w-0\">\n          <div className=\"font-medium truncate\">{name}</div>\n          <div className=\"text-xs text-white/70 truncate\">{stream} â€¢ {time}</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-dvh w-full bg-black text-white overflow-hidden\">\n      <div className=\"mx-auto max-w-[1200px] px-6 py-6 h-full\">\n        {/* Header */}\n        <h1 className=\"text-2xl sm:text-3xl md:text-[32px] font-bold tracking-wide\">LIVE FACE DETECTION</h1>\n\n        {/* Content area */}\n        <div className=\"mt-6 h-[calc(100%-64px)] grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-6\">\n          {/* Stream tiles container */}\n          <div className=\"bg-panel rounded-2xl p-6 h-full overflow-auto\">\n            <div className=\"flex flex-wrap gap-4 sm:gap-5 md:gap-6\">\n              {streams.map((s) => (\n                <div\n                  key={s.id}\n                  className=\"relative w-40 h-24 sm:w-56 sm:h-32 md:w-[220px] md:h-[130px] flex-none\"\n                  onClick={() => {\n                    setIsFullscreen(true);\n                    setFullscreenLocalId(s.id);\n                  }}\n                  role=\"button\"\n                  aria-label={`Expand ${s.name}`}\n                  title=\"Expand\"\n                >\n                  {s.processorId ? (\n                    <>\n                      <img\n                        src={`/api/video_feed/${encodeURIComponent(s.processorId)}`}\n                        alt={s.name}\n                        className=\"absolute inset-0 w-full h-full object-cover rounded-2xl\"\n                      />\n                      <div className=\"absolute inset-x-0 bottom-0 bg-black/40 text-white px-3 py-1 rounded-b-2xl pointer-events-none\">\n                        <span className=\"text-xs\">{s.name}</span>\n                      </div>\n                    </>\n                  ) : (\n                    <div className=\"absolute inset-0 bg-[#8f8f8f] text-black rounded-2xl flex items-end justify-start p-4\">\n                      <span className=\"text-white/90\">{s.name}</span>\n                    </div>\n                  )}\n                  {/* Rename */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setShowRename(true);\n                      setRenameLocalId(s.id);\n                      setRenameValue(s.name);\n                    }}\n                    className=\"absolute -left-2 -top-2 h-7 w-7 rounded-full bg-black/70 text-white grid place-items-center hover:bg-black\"\n                    aria-label={`Rename ${s.name}`}\n                    title=\"Rename\"\n                  >\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"h-4 w-4\">\n                      <path d=\"M12 20h9\" />\n                      <path d=\"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z\" />\n                    </svg>\n                  </button>\n                  {/* Delete */}\n                  <button\n                    onClick={async (e) => {\n                      e.stopPropagation();\n                      try {\n                        const requests: Promise<Response>[] = [];\n                        if (s.processorId) {\n                          requests.push(\n                            fetch(\"/api/stop_stream\", {\n                              method: \"POST\",\n                              headers: { \"Content-Type\": \"application/json\" },\n                              body: JSON.stringify({ stream_id: s.processorId }),\n                            })\n                          );\n                        }\n                        if (s.backendId) {\n                          requests.push(\n                            fetch(`/api/streams?id=${encodeURIComponent(s.backendId)}`, { method: \"DELETE\" })\n                          );\n                        }\n                        if (requests.length) {\n                          await Promise.allSettled(requests);\n                        }\n                      } finally {\n                        setStreams((prev) => prev.filter((x) => x.id !== s.id));\n                      }\n                    }}\n                    className=\"absolute -right-2 -top-2 h-7 w-7 rounded-full bg-black/70 text-white grid place-items-center hover:bg-black\"\n                    aria-label={`Delete ${s.name}`}\n                    title=\"Delete\"\n                  >\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"h-4 w-4\">\n                      <path d=\"M3 6h18M9 6v12m6-12v12M5 6l1 14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-14M8 6l1-2h6l1 2\" />\n                    </svg>\n                  </button>\n                </div>\n              ))}\n              {/* Add tile */}\n              <button\n                onClick={() => {\n                  setShowAdd(true);\n                  setNewName(\"\");\n                  setNewUrl(\"\");\n                }}\n                className=\"bg-tile rounded-2xl w-40 h-24 sm:w-56 sm:h-32 md:w-[220px] md:h-[130px] flex items-center justify-center hover:opacity-90 transition flex-none\"\n                aria-label=\"Add stream\"\n                title=\"Add\"\n              >\n                <div className=\"relative h-8 w-8\">\n                  <div className=\"absolute left-1/2 top-0 h-8 w-[2px] -translate-x-1/2 bg-black/70\"></div>\n                  <div className=\"absolute top-1/2 left-0 w-8 h-[2px] -translate-y-1/2 bg-black/70\"></div>\n                </div>\n              </button>\n            </div>\n          </div>\n\n          {/* Right: stats + suspects */}\n          <RightPanel hasStreams={streams.length > 0} />\n\n          {/* Fullscreen overlay */}\n          {isFullscreen && (\n            <div className=\"fixed inset-0 bg-black/50 z-50 grid place-items-center p-6\">\n              <div className=\"relative w-full max-w-5xl h-[80dvh] rounded-2xl bg-tile-active text-black overflow-hidden\">\n                <button\n                  aria-label=\"Minimize stream\"\n                  onClick={() => setIsFullscreen(false)}\n                  className=\"absolute right-4 top-4 h-8 w-8 grid place-items-center rounded-md bg-white/70 text-black hover:bg-white transition z-20\"\n                  title=\"Minimize\"\n                >\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"h-5 w-5\">\n                    <path d=\"M9 9L4 9L4 4M15 15L20 15L20 20\" />\n                    <path d=\"M9 9L4 4M15 15L20 20\" />\n                  </svg>\n                </button>\n                {(() => {\n                  const s = streams.find((x) => x.id === fullscreenLocalId) || streams[0];\n                  if (!s) return null;\n                  return s.processorId ? (\n                    <img\n                      src={`/api/video_feed/${encodeURIComponent(s.processorId)}`}\n                      alt={s.name}\n                      className=\"absolute inset-0 w-full h-full object-contain bg-black\"\n                    />\n                  ) : (\n                    <div className=\"absolute inset-0 bg-[#8f8f8f]\" />\n                  );\n                })()}\n                {(() => {\n                  const s = streams.find((x) => x.id === fullscreenLocalId) || streams[0];\n                  if (!s) return null;\n                  return (\n                    <div className=\"absolute bottom-4 right-4 text-white text-lg\">\n                      <StreamLabel label={s.name} />\n                    </div>\n                  );\n                })()}\n              </div>\n            </div>\n          )}\n\n          {/* Add Stream Modal */}\n          {showAdd && (\n            <div className=\"fixed inset-0 bg-black/40 z-50 grid place-items-center p-6\">\n              <div className=\"w-full max-w-[520px] rounded-2xl bg-[#3a3a3a] p-8 shadow-lg\">\n                <h2 className=\"text-2xl font-semibold\">Paste the link</h2>\n                <form\n                  className=\"mt-6 space-y-4\"\n                  onSubmit={async (e) => {\n                    e.preventDefault();\n                    const name = newName.trim() || `stream ${nextId}`;\n                    const url = newUrl.trim();\n                    let processorId: string | undefined = undefined;\n                    try {\n                      const startRes = await fetch(\"/api/start_stream\", {\n                        method: \"POST\",\n                        headers: { \"Content-Type\": \"application/json\" },\n                        body: JSON.stringify({ url }),\n                      });\n                      const startData = await startRes.json().catch(() => ({}));\n                      processorId = startData?.stream_id;\n                    } catch {}\n\n                    try {\n                      const res = await fetch(\"/api/streams\", {\n                        method: \"POST\",\n                        headers: { \"Content-Type\": \"application/json\" },\n                        body: JSON.stringify({ name, url }),\n                      });\n                      const data = await res.json().catch(() => ({}));\n                      const backendId: string | undefined = data?.stream?.id;\n                      setStreams((prev) => [...prev, { id: nextId, name, url, backendId, processorId }]);\n                    } catch {\n                      // fallback: still add locally\n                      setStreams((prev) => [...prev, { id: nextId, name, url, processorId }]);\n                    }\n                    setShowAdd(false);\n                  }}\n                >\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm text-white/80\">Name</label>\n                    <input\n                      value={newName}\n                      onChange={(e) => setNewName(e.target.value)}\n                      placeholder={`stream ${nextId}`}\n                      className=\"w-full h-11 rounded-full px-4 text-black outline-none border-0 bg-white\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm text-white/80\">Link</label>\n                    <input\n                      value={newUrl}\n                      onChange={(e) => setNewUrl(e.target.value)}\n                      placeholder=\"https://...\"\n                      className=\"w-full h-11 rounded-full px-4 text-black outline-none border-0 bg-white\"\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-3 pt-2\">\n                    <button\n                      type=\"submit\"\n                      className=\"h-11 px-6 rounded-full btn-white text-base font-medium\"\n                    >\n                      Save\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowAdd(false)}\n                      className=\"h-11 px-6 rounded-full bg-chip text-white/90 text-base\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          )}\n\n          {/* Rename Stream Modal */}\n          {showRename && (\n            <div className=\"fixed inset-0 bg-black/40 z-50 grid place-items-center p-6\">\n              <div className=\"w-full max-w-[420px] rounded-2xl bg-[#3a3a3a] p-8 shadow-lg\">\n                <h2 className=\"text-2xl font-semibold\">Rename stream</h2>\n                <form\n                  className=\"mt-6 space-y-4\"\n                  onSubmit={async (e) => {\n                    e.preventDefault();\n                    const trimmed = renameValue.trim();\n                    if (!trimmed || renameLocalId == null) {\n                      setShowRename(false);\n                      return;\n                    }\n                    let backendId: string | undefined;\n                    setStreams((prev) => {\n                      const next = prev.map((x) => {\n                        if (x.id === renameLocalId) {\n                          backendId = x.backendId;\n                          return { ...x, name: trimmed };\n                        }\n                        return x;\n                      });\n                      return next;\n                    });\n                    if (backendId) {\n                      try {\n                        await fetch(`/api/streams`, {\n                          method: \"PATCH\",\n                          headers: { \"Content-Type\": \"application/json\" },\n                          body: JSON.stringify({ id: backendId, name: trimmed }),\n                        });\n                      } catch {}\n                    }\n                    setShowRename(false);\n                  }}\n                >\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm text-white/80\">New name</label>\n                    <input\n                      value={renameValue}\n                      onChange={(e) => setRenameValue(e.target.value)}\n                      placeholder=\"Enter a name\"\n                      className=\"w-full h-11 rounded-full px-4 text-black outline-none border-0 bg-white\"\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-3 pt-2\">\n                    <button\n                      type=\"submit\"\n                      className=\"h-11 px-6 rounded-full btn-white text-base font-medium\"\n                    >\n                      Save\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowRename(false)}\n                      className=\"h-11 px-6 rounded-full bg-chip text-white/90 text-base\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}